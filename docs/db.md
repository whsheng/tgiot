**数据结构**

----

#### 概述

+ 在考虑、设计整个平台数据结构时，设备与目标是两个不同的概念，设备是指：智能后视镜、OBD、Tracker等这类定位设备，而目标可以是：乘用车、商用车、个人、宠物、轮船等一切可以移动的物体。
+ 每个目标都会安装1至N个设备，每个设备都会与1张SIM卡对应，每张SIM卡会产生多笔充值记录。
+ 每个目标使用过程中，都会依赖于设备产生大量位置数据、多媒体数据(照片/视频)。
+ 角色、功能、权限。
+ 每个账号都会有一个角色，每个账号都会对应1个渠道商，每个渠道商下面都会有N台目标和N个渠道；

#### ER图

![2017031210697tg_iot_erd.png](http://ohi7mg1ce.bkt.clouddn.com/2017031210697tg_iot_erd.png)

#### 实体介绍

+ 设备类型信息(t_devicetype):保存设备类型有关的字典表；
+ 目标类型信息(t_objecttype):保存目标类型有关的字典表；
+ SIM卡信息(t_simcard):保存SIM卡基本信息；
+ 目标基本信息(t_objectinfo):保存目标基本信息，如：目标ID、目标名称、目标对应的设备、目标对应的SIM
+ 目标配置信息(t_deviceconfig)：保存该目标最后的配置信息，如：上传间隔、拍照时长等；
+ 车辆基本信息(t_vehicle):目标ID、车牌号码、车架号、发动机号、车辆品牌等
+ 角色信息(t_role):平台中支持自定义角色的创建，每种角色会被赋予不同的权限(即对平台的操作)
+ 模块信息(t_module):平台(包括：BPS、WEB、WX等)各个功能模块描述；
+ 角色权限信息(t_rolepermission):保存各个角色所对应的模块信息，即这个角色能否操作这个模块；
+ 账号信息(t_account):平台各个账号的登录信息，如：账号名、密码、账号角色、账号头像等；
+ 渠道信息(t_channel):渠道一般是指：客户/代理商/经销商
+ 渠道与目标关系(t_channelobject):渠道下的设备列表；
+ 目标历史轨迹信息(t_historytrack):目标所产生的历史轨迹信息，用于轨迹回放、查询等；


#### [SQL脚本](./iot.sql)


